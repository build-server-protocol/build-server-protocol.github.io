"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[95],{3613:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>l,contentTitle:()=>i,default:()=>u,frontMatter:()=>n,metadata:()=>o,toc:()=>c});var s=r(3955),a=r(7862);const n={id:"cargo",title:"Cargo Extension",sidebar_label:"Cargo"},i=void 0,o={id:"extensions/cargo",title:"Cargo Extension",description:"The following section contains Cargo-specific extensions to the build server",source:"@site/generated/extensions/cargo.md",sourceDirName:"extensions",slug:"/extensions/cargo",permalink:"/docs/extensions/cargo",draft:!1,unlisted:!1,editUrl:"https://github.com/build-server-protocol/build-server-protocol/edit/master/docs/extensions/cargo.md",tags:[],version:"current",frontMatter:{id:"cargo",title:"Cargo Extension",sidebar_label:"Cargo"},sidebar:"docs",previous:{title:"Build Server Discovery",permalink:"/docs/overview/server-discovery"},next:{title:"cpp",permalink:"/docs/extensions/cpp"}},l={},c=[{value:"BSP version",id:"bsp-version",level:2},{value:"BSP Server remote interface",id:"bsp-server-remote-interface",level:2},{value:"CargoFeaturesState: request",id:"cargofeaturesstate-request",level:3},{value:"CargoFeaturesStateResult",id:"cargofeaturesstateresult",level:4},{value:"PackageFeatures",id:"packagefeatures",level:4},{value:"SetCargoFeatures: request",id:"setcargofeatures-request",level:3},{value:"SetCargoFeaturesParams",id:"setcargofeaturesparams",level:4},{value:"SetCargoFeaturesResult",id:"setcargofeaturesresult",level:4},{value:"BuildTargetData kinds",id:"buildtargetdata-kinds",level:2},{value:"CargoBuildTarget",id:"cargobuildtarget",level:3},{value:"CargoBuildTarget",id:"cargobuildtarget-1",level:4}];function d(e){const t={code:"code",h2:"h2",h3:"h3",h4:"h4",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,a.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.p,{children:"The following section contains Cargo-specific extensions to the build server\nprotocol."}),"\n",(0,s.jsx)(t.h2,{id:"bsp-version",children:"BSP version"}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.code,{children:"2.2.0"})}),"\n",(0,s.jsx)(t.h2,{id:"bsp-server-remote-interface",children:"BSP Server remote interface"}),"\n",(0,s.jsx)(t.h3,{id:"cargofeaturesstate-request",children:"CargoFeaturesState: request"}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.strong,{children:"Unstable"})," (may change in future versions)"]}),"\n",(0,s.jsx)(t.p,{children:"The cargo features state request is sent from the client to the server to\nquery for the current state of the Cargo features. Provides also mapping\nbetween Cargo packages and build target identifiers."}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsxs)(t.li,{children:["method: ",(0,s.jsx)(t.code,{children:"workspace/cargoFeaturesState"})]}),"\n",(0,s.jsxs)(t.li,{children:["result: ",(0,s.jsx)(t.code,{children:"CargoFeaturesStateResult"})]}),"\n"]}),"\n",(0,s.jsx)(t.h4,{id:"cargofeaturesstateresult",children:"CargoFeaturesStateResult"}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.strong,{children:"Unstable"})," (may change in future versions)"]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-ts",children:"export interface CargoFeaturesStateResult {\n  /** The list of Cargo packages with assigned to them target\n   * identifiers and available features. */\n  packagesFeatures: PackageFeatures[];\n}\n"})}),"\n",(0,s.jsx)(t.h4,{id:"packagefeatures",children:"PackageFeatures"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-ts",children:"export interface PackageFeatures {\n  /** The Cargo package identifier. */\n  packageId: string;\n\n  /** The list of build target identifiers assigned to the Cargo package. */\n  targets: BuildTargetIdentifier[];\n\n  /** The list of available features for the Cargo package. */\n  availableFeatures: FeaturesDependencyGraph;\n\n  /** The list of enabled features for the Cargo package. */\n  enabledFeatures: Set<Feature>;\n}\n"})}),"\n",(0,s.jsx)(t.h3,{id:"setcargofeatures-request",children:"SetCargoFeatures: request"}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.strong,{children:"Unstable"})," (may change in future versions)"]}),"\n",(0,s.jsx)(t.p,{children:"The enable cargo features request is sent from the client to the server to\nset provided features collection as a new state for\nthe specified Cargo package."}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsxs)(t.li,{children:["method: ",(0,s.jsx)(t.code,{children:"workspace/setCargoFeatures"})]}),"\n",(0,s.jsxs)(t.li,{children:["params: ",(0,s.jsx)(t.code,{children:"SetCargoFeaturesParams"})]}),"\n",(0,s.jsxs)(t.li,{children:["result: ",(0,s.jsx)(t.code,{children:"SetCargoFeaturesResult"})]}),"\n"]}),"\n",(0,s.jsx)(t.h4,{id:"setcargofeaturesparams",children:"SetCargoFeaturesParams"}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.strong,{children:"Unstable"})," (may change in future versions)"]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-ts",children:"export interface SetCargoFeaturesParams {\n  /** Package ID for which new features state will be set. */\n  packageId: string;\n\n  /** The list of features to be set as a new state. */\n  features: Set<Feature>;\n}\n"})}),"\n",(0,s.jsx)(t.h4,{id:"setcargofeaturesresult",children:"SetCargoFeaturesResult"}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.strong,{children:"Unstable"})," (may change in future versions)"]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-ts",children:"export interface SetCargoFeaturesResult {\n  /** The status code of the operation. */\n  statusCode: StatusCode;\n}\n"})}),"\n",(0,s.jsx)(t.h2,{id:"buildtargetdata-kinds",children:"BuildTargetData kinds"}),"\n",(0,s.jsx)(t.h3,{id:"cargobuildtarget",children:"CargoBuildTarget"}),"\n",(0,s.jsxs)(t.p,{children:["This structure is embedded in\nthe ",(0,s.jsx)(t.code,{children:"data?: BuildTargetData"})," field, when\nthe ",(0,s.jsx)(t.code,{children:"dataKind"})," field contains ",(0,s.jsx)(t.code,{children:'"cargo"'}),"."]}),"\n",(0,s.jsx)(t.h4,{id:"cargobuildtarget-1",children:"CargoBuildTarget"}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.code,{children:"CargoBuildTarget"})," is a basic data structure that contains\ncargo-specific metadata."]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-ts",children:"export interface CargoBuildTarget {\n  edition: RustEdition;\n\n  requiredFeatures: Set<Feature>;\n}\n"})})]})}function u(e={}){const{wrapper:t}={...(0,a.R)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},7862:(e,t,r)=>{r.d(t,{R:()=>i,x:()=>o});var s=r(2515);const a={},n=s.createContext(a);function i(e){const t=s.useContext(n);return s.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function o(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:i(e.components),s.createElement(n.Provider,{value:t},e.children)}}}]);